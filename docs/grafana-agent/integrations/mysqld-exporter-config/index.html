<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.92.2" />
    <meta name="description" content="Documentation for nightingale">
    
    <title>MySQLd Exporter :: N9E</title>
    <link href="/css/nucleus.css?1652425219" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1652425219" rel="stylesheet">
    <link href="/css/featherlight.min.css?1652425219" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1652425219" rel="stylesheet">
    <link href="/css/auto-complete.css?1652425219" rel="stylesheet">
    <link href="/css/theme.css?1652425219" rel="stylesheet">
    <link href="/css/theme-blue.css?1652425219" rel="stylesheet">
    <link href="/css/variant.css?1652425219" rel="stylesheet">
    <link href="/css/print.css?1652425219" rel="stylesheet" media="print">
    <script src="/js/jquery.min.js?1652425219"></script>
    <style>
      :root #header + #content > #left > #rlblock_left{
        display:none !important;
      }
    </style>
  </head>
  <body class="" data-url="/grafana-agent/integrations/mysqld-exporter-config/">
    <script>
      var index_url="/index.json";
      var root_url="/";
      var baseUri=root_url.replace(/\/$/, '');
    </script>
    <nav id="sidebar" class="showVisitedLinks">
      <div id="header-wrapper">
        <div id="header">

<a href="/" style="font-weight: 900;font-size: 24px;color: #fff;">Nightingale</a>
<div style="color:#eee;line-height: 24px;padding-top: 8px;font-size: 12px;"><i>Version 5.0</i></div>
        </div>
        <div class="searchbox">
          <label for="search-by"><i class="fas fa-search"></i></label>
          <input data-search-input id="search-by" type="search" placeholder="Search...">
          <span data-search-clear=""><i class="fas fa-times"></i></span>
        </div>
        <script src="/js/lunr.min.js?1652425219"></script>
        <script src="/js/auto-complete.js?1652425219"></script>
        <!-- hack to let hugo tell us how to get to the root when using relativeURLs, it needs to be called *url= for it to do its magic: -->
        <!-- https://github.com/gohugoio/hugo/blob/145b3fcce35fbac25c7033c91c1b7ae6d1179da8/transform/urlreplacers/absurlreplacer.go#L72 -->
        <script src="/js/search.js?1652425219"></script>
      </div>
      <div class="highlightable">
        <ul class="topics">
          <li data-nav-id="/quickstart/" title="安装部署" class="dd-item"><a href="/quickstart/">安装部署<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/quickstart/compose/" title="使用Docker快速启动测试" class="dd-item"><a href="/quickstart/compose/">使用Docker快速启动测试<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/standalone/" title="使用二进制部署单机版服务端" class="dd-item"><a href="/quickstart/standalone/">使用二进制部署单机版服务端<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/telegraf/" title="使用Telegraf采集监控数据" class="dd-item"><a href="/quickstart/telegraf/">使用Telegraf采集监控数据<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/victoriametrics/" title="使用VictoriaMetrics作为时序库" class="dd-item"><a href="/quickstart/victoriametrics/">使用VictoriaMetrics作为时序库<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/multitsdb/" title="接入多个Prom/VM/M3DB集群" class="dd-item"><a href="/quickstart/multitsdb/">接入多个Prom/VM/M3DB集群<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/clusters/" title="生产环境部署高可用集群版" class="dd-item"><a href="/quickstart/clusters/">生产环境部署高可用集群版<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/ibex/" title="告警自愈依赖的脚本下发执行模块" class="dd-item"><a href="/quickstart/ibex/">告警自愈依赖的脚本下发执行模块<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/quickstart/compile/" title="源码编译夜莺前后端及告警自愈模块" class="dd-item"><a href="/quickstart/compile/">源码编译夜莺前后端及告警自愈模块<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/usage/" title="功能介绍" class="dd-item"><a href="/usage/">功能介绍<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/usage/grafana/" title="对接Grafana" class="dd-item"><a href="/usage/grafana/">对接Grafana<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/linux/" title="监控Linux" class="dd-item"><a href="/usage/linux/">监控Linux<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/windows/" title="监控Windows" class="dd-item"><a href="/usage/windows/">监控Windows<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/snmp/" title="监控网络设备" class="dd-item"><a href="/usage/snmp/">监控网络设备<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/promapm/" title="埋点监控之PromSDK" class="dd-item"><a href="/usage/promapm/">埋点监控之PromSDK<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/statsd/" title="埋点监控之StatsdSDK" class="dd-item"><a href="/usage/statsd/">埋点监控之StatsdSDK<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/http_response/" title="监控URL" class="dd-item"><a href="/usage/http_response/">监控URL<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/mtail/" title="监控日志" class="dd-item"><a href="/usage/mtail/">监控日志<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/mysql/" title="监控MySQL" class="dd-item"><a href="/usage/mysql/">监控MySQL<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/usage/redis/" title="监控Redis" class="dd-item"><a href="/usage/redis/">监控Redis<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/api/" title="API" class="dd-item"><a href="/api/">API<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/api/read/" title="读取监控数据" class="dd-item"><a href="/api/read/">读取监控数据<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/api/opentsdb/" title="推送监控数据（OpenTSDB协议）" class="dd-item"><a href="/api/opentsdb/">推送监控数据（OpenTSDB协议）<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/api/webapi/" title="调用webapi的接口" class="dd-item"><a href="/api/webapi/">调用webapi的接口<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/faq/" title="FAQ" class="dd-item"><a href="/faq/">FAQ<i class="fas fa-check read-icon"></i></a><ul></ul></li>
          <li data-nav-id="/usecase/" title="社区用户实践分享" class="dd-item"><a href="/usecase/">社区用户实践分享<i class="fas fa-check read-icon"></i></a><ul></ul></li>
          <li data-nav-id="/grafana-agent/" title="使用Grafana-agent采集监控数据" class="dd-item parent"><a href="/grafana-agent/">使用Grafana-agent采集监控数据<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/grafana-agent/integrations/" title="grafana-agent采集常用exporter" class="dd-item parent alwaysopen"><a href="/grafana-agent/integrations/">grafana-agent采集常用exporter<i class="fas fa-check read-icon"></i></a><ul>
          <li data-nav-id="/grafana-agent/integrations/cadvisor-config/" title="cAdvisor Exporter" class="dd-item"><a href="/grafana-agent/integrations/cadvisor-config/">cAdvisor Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/consul-exporter-config/" title="Consul Exporter" class="dd-item"><a href="/grafana-agent/integrations/consul-exporter-config/">Consul Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/dnsmasq-exporter-config/" title="dnsmasq Exporter" class="dd-item"><a href="/grafana-agent/integrations/dnsmasq-exporter-config/">dnsmasq Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/elasticsearch-exporter-config/" title="Elasticsearch Exporter" class="dd-item"><a href="/grafana-agent/integrations/elasticsearch-exporter-config/">Elasticsearch Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/github-exporter-config/" title="Github Exporter" class="dd-item"><a href="/grafana-agent/integrations/github-exporter-config/">Github Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/kafka-exporter-config/" title="Kafka Exporter" class="dd-item"><a href="/grafana-agent/integrations/kafka-exporter-config/">Kafka Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/memcached-exporter-config/" title="Memcached Exporter" class="dd-item"><a href="/grafana-agent/integrations/memcached-exporter-config/">Memcached Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/mongodb-exporter-config/" title="Mongodb Exporter" class="dd-item"><a href="/grafana-agent/integrations/mongodb-exporter-config/">Mongodb Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/mysqld-exporter-config/" title="MySQLd Exporter" class="dd-item active"><a href="/grafana-agent/integrations/mysqld-exporter-config/">MySQLd Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/node-exporter-config/" title="Node Exporter" class="dd-item"><a href="/grafana-agent/integrations/node-exporter-config/">Node Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/postgres-exporter-config/" title="Postgres Exporter" class="dd-item"><a href="/grafana-agent/integrations/postgres-exporter-config/">Postgres Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/process-exporter-config/" title="Process Exporter" class="dd-item"><a href="/grafana-agent/integrations/process-exporter-config/">Process Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/redis-exporter-config/" title="Redis Exporter" class="dd-item"><a href="/grafana-agent/integrations/redis-exporter-config/">Redis Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/statsd-exporter-config/" title="Statsd Exporter" class="dd-item"><a href="/grafana-agent/integrations/statsd-exporter-config/">Statsd Exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/integrations/windows-exporter-config/" title="Windows Exporter" class="dd-item"><a href="/grafana-agent/integrations/windows-exporter-config/">Windows Exporter<i class="fas fa-check read-icon"></i></a></li></ul></li>
          <li data-nav-id="/grafana-agent/scrape_exporters/" title="grafana-agent收集三方exporter" class="dd-item"><a href="/grafana-agent/scrape_exporters/">grafana-agent收集三方exporter<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/k8s_metrics/" title="在K8s中运行grafana-agent收集metrics" class="dd-item"><a href="/grafana-agent/k8s_metrics/">在K8s中运行grafana-agent收集metrics<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/k8s_logs/" title="在K8s中运行grafana-agent收集log" class="dd-item"><a href="/grafana-agent/k8s_logs/">在K8s中运行grafana-agent收集log<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/k8s_traces/" title="在K8s中运行grafana-agent收集trace" class="dd-item"><a href="/grafana-agent/k8s_traces/">在K8s中运行grafana-agent收集trace<i class="fas fa-check read-icon"></i></a></li>
          <li data-nav-id="/grafana-agent/how-to-monitoring-k8s/" title="监控K8s集群和应用" class="dd-item"><a href="/grafana-agent/how-to-monitoring-k8s/">监控K8s集群和应用<i class="fas fa-check read-icon"></i></a></li></ul></li>
        </ul>
        <div id="shortcuts">
          <div class="nav-title">More</div>
          <ul>
            <li><a class="padding" href="https://github.com/didi/nightingale"><i class='fab fa-fw fa-github'></i> 代码仓库</a></li>
            <li><a class="padding" href="https://space.bilibili.com/442531657/channel/seriesdetail?sid=571645"><i class='fas fa-fw fa-book'></i> 视频教程</a></li>
          </ul>
        </div>
        <div id="prefooter">
          <hr/>
          <ul>
            <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
          </ul>
        </div>
        <div id="footer">
          <a class="github-button" href="https://github.com/didi/nightingale" data-icon="octicon-star" data-show-count="true" aria-label="Star nightingale on GitHub">Star</a>
          <a class="github-button" href="https://github.com/didi/nightingale/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork nightingale on GitHub">Fork</a>
          <p>Built with <a href="https://github.com/didi/nightingale"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>
          <script async defer src="https://buttons.github.io/buttons.js"></script>
        </div>
      </div>
    </nav>
    <div id="body">
      <div id="overlay"></div>
      <div class="padding highlightable">
        <div id="top-bar">
          <div id="top-github-link">
            <a class="github-link" title='Edit this page' href="https://github.com/n9e/n9e.github.io/tree/master/content/grafana-agent/integrations/mysqld-exporter-config.md" target="blank">
              <i class="fas fa-code-branch"></i>
              <span id="top-github-link-text">Edit this page</span>
            </a>
          </div>
          <div id="breadcrumbs">
            <span id="sidebar-toggle-span">
              <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                <i class="fas fa-bars"></i>
              </a>
            </span>
            <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
            <ol class="links" itemscope itemtype="http://schema.org/BreadcrumbList">
              <meta itemprop="itemListOrder" content="Descending" />
                <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="4" /><a itemprop="item" href="/"><span itemprop="name">夜莺手册</span></a> > </li>
                <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="3" /><a itemprop="item" href="/grafana-agent/"><span itemprop="name">使用Grafana-agent采集监控数据</span></a> > </li>
                <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="2" /><a itemprop="item" href="/grafana-agent/integrations/"><span itemprop="name">grafana-agent采集常用exporter</span></a> > </li>
                <li itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement"><meta itemprop="position" content="1" /><a itemprop="item" href="/grafana-agent/integrations/mysqld-exporter-config/" aria-disabled="true"><span itemprop="name">MySQLd Exporter</span></a></li>
            </ol>
          </div>
            <div class="progress">
              <div class="wrapper">
<nav id="TableOfContents"></nav>
              </div>
            </div>
        </div>
        <div id="head-tags">
        </div>
        <main id="body-inner">
          <h1>MySQLd Exporter</h1>

<p>grafana-agent 内置集成了 <a href="https://github.com/prometheus/mysqld_exporter"><code>mysqld_exporter</code></a>， 来收集MySQL Server的metrics指标。</p>
<p>目前一个grafana-agent实例，只能配置和采集一个MySQL server的metrics，因此如果您想要配置采集多个MySQL server的指标，那么需要启动多个grafana-agent实例，并使用 <code>relabel_configs</code> 机制来给不同的MySQL server的metrics数据做区分。</p>
<h1 id="配置并启用mysqld_exporter">配置并启用mysqld_exporter</h1>
<p>下面是开启了mysqld_exporter的配置文件示例:</p>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#ff6ac1">mysqld_exporter</span>:
  <span style="color:#ff6ac1">enabled</span>: <span style="color:#ff6ac1">true</span>
  <span style="color:#ff6ac1">data_source_name</span>: root@(server-a:3306)/
  <span style="color:#ff6ac1">relabel_configs</span>:
  - <span style="color:#ff6ac1">source_labels</span>: [__address__]
    <span style="color:#ff6ac1">target_label</span>: instance
    <span style="color:#ff6ac1">replacement</span>: server-a
</code></pre></div><p>为了安全起见，推荐您为grafana-agent mysqld_exporter 配置一个单独的数据库账号，并授予合适的权限，需要的权限配置详情可以参考 <a href="https://github.com/prometheus/mysqld_exporter#required-grants">MySQL Expoter 官方文档</a>.</p>
<h1 id="采集的关键指标列表">采集的关键指标列表</h1>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#ff6ac1">mysql_global_status_uptime</span>: The number of seconds that the server has been up.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_uptime_since_flush_status</span>: The number of seconds since the most recent FLUSH STATUS statement.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_queries</span>: The number of statements executed by the server. This variable includes statements executed within stored programs, unlike the Questions variable. It does not count COM_PING or COM_STATISTICS commands.(Counter)
<span style="color:#ff6ac1">mysql_global_status_threads_connected</span>: The number of currently open connections.(Counter)
<span style="color:#ff6ac1">mysql_global_status_connections</span>: The number of connection attempts (successful or not) to the MySQL server.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_max_used_connections</span>: The maximum number of connections that have been in use simultaneously since the server started.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_threads_running</span>: The number of threads that are not sleeping.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_questions</span>: The number of statements executed by the server. This includes only statements sent to the server by clients and not statements executed within stored programs, unlike the Queries variable. This variable does not count COM_PING, COM_STATISTICS, COM_STMT_PREPARE, COM_STMT_CLOSE, or COM_STMT_RESET commands.(Counter)
<span style="color:#ff6ac1">mysql_global_status_threads_cached</span>: The number of threads in the thread cache.(Counter)
<span style="color:#ff6ac1">mysql_global_status_threads_created</span>: The number of threads created to handle connections. If Threads_created is big, you may want to increase the thread_cache_size value. The cache miss rate can be calculated as Threads_created/Connections.(Counter)
<span style="color:#ff6ac1">mysql_global_status_created_tmp_tables</span>: The number of internal temporary tables created by the server while executing statements.(Counter)
<span style="color:#ff6ac1">mysql_global_status_created_tmp_disk_tables</span>: The number of internal on-disk temporary tables created by the server while executing statements. You can compare the number of internal on-disk temporary tables created to the total number of internal temporary tables created by comparing Created_tmp_disk_tables and Created_tmp_tables values.(Counter)
<span style="color:#ff6ac1">mysql_global_status_created_tmp_files</span>: How many temporary files mysqld has created.(Counter)
<span style="color:#ff6ac1">mysql_global_status_select_full_join</span>: The number of joins that perform table scans because they do not use indexes. If this value is not 0, you should carefully check the indexes of your tables.(Counter)
<span style="color:#ff6ac1">mysql_global_status_select_full_range_join</span>: The number of joins that used a range search on a reference table.(Counter)
<span style="color:#ff6ac1">mysql_global_status_select_range</span>: The number of joins that used ranges on the first table. This is normally not a critical issue even if the value is quite large.(Counter)
<span style="color:#ff6ac1">mysql_global_status_select_range_check</span>: The number of joins without keys that check for key usage after each row. If this is not 0, you should carefully check the indexes of your tables.(Counter)
<span style="color:#ff6ac1">mysql_global_status_select_scan</span>: The number of joins that did a full scan of the first table.(Counter)
<span style="color:#ff6ac1">mysql_global_status_sort_rows</span>: The number of sorted rows.(Counter)
<span style="color:#ff6ac1">mysql_global_status_sort_range</span>: The number of sorts that were done using ranges.(Counter)
<span style="color:#ff6ac1">mysql_global_status_sort_merge_passes</span>: The number of merge passes that the sort algorithm has had to do. If this value is large, you should consider increasing the value of the sort_buffer_size system variable.(Counter)
<span style="color:#ff6ac1">mysql_global_status_sort_scan</span>: The number of sorts that were done by scanning the table.(Counter)
<span style="color:#ff6ac1">mysql_global_status_slow_queries</span>: The number of queries that have taken more than long_query_time seconds. This counter increments regardless of whether the slow query log is enabled.(Counter)
<span style="color:#ff6ac1">mysql_global_status_aborted_connects</span>: The number of failed attempts to connect to the MySQL server.(Counter)
<span style="color:#ff6ac1">mysql_global_status_aborted_clients</span>: The number of connections that were aborted because the client died without closing the connection properly.(Counter)
<span style="color:#ff6ac1">mysql_global_status_table_locks_immediate</span>: The number of times that a request for a table lock could be granted immediately. Locks Immediate rising and falling is normal activity.(Counter)
<span style="color:#ff6ac1">mysql_global_status_table_locks_waited</span>: The number of times that a request for a table lock could not be granted immediately and a wait was needed. If this is high and you have performance problems, you should first optimize your queries, and then either split your table or tables or use replication.(Counter)
<span style="color:#ff6ac1">mysql_global_status_bytes_received</span>: The number of bytes received from all clients.(Counter)
<span style="color:#ff6ac1">mysql_global_status_bytes_sent</span>: The number of bytes sent to all clients.(Counter)
<span style="color:#ff6ac1">mysql_global_status_innodb_page_size</span>: InnoDB page size (default 16KB). Many values are counted in pages; the page size enables them to be easily converted to bytes.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_buffer_pool_pages</span>: The number of pages in the InnoDB buffer pool.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_commands_total</span>: The number of times each xxx statement has been executed.(Counter)
<span style="color:#ff6ac1">mysql_global_status_handlers_total</span>: Handler statistics are internal statistics on how MySQL is selecting, updating, inserting, and modifying rows, tables, and indexes. This is in fact the layer between the Storage Engine and MySQL.(Counter)
<span style="color:#ff6ac1">mysql_global_status_opened_files</span>: The number of files that have been opened with my_open() (a mysys library function). Parts of the server that open files without using this function do not increment the count.(Counter)
<span style="color:#ff6ac1">mysql_global_status_open_tables</span>: The number of tables that are open.(Gauge)
<span style="color:#ff6ac1">mysql_global_status_opened_tables</span>: The number of tables that have been opened. If Opened_tables is big, your table_open_cache value is probably too small.(Counter)
<span style="color:#ff6ac1">mysql_global_status_table_open_cache_hits</span>: The number of hits for open tables cache lookups.(Counter)
<span style="color:#ff6ac1">mysql_global_status_table_open_cache_misses</span>: The number of misses for open tables cache lookups.(Counter)
<span style="color:#ff6ac1">mysql_global_status_table_open_cache_overflows</span>: The number of overflows for the open tables cache.(Counter)
<span style="color:#ff6ac1">mysql_global_status_innodb_num_open_files</span>: The number of files InnoDB currently holds open.(Gauge)

<span style="color:#ff6ac1">mysql_global_variables_thread_cache_size</span>: How many threads the server should cache for reuse.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_max_connections</span>: The maximum permitted number of simultaneous client connections.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_innodb_buffer_pool_size</span>: The size in bytes of the buffer pool, the memory area where InnoDB caches table and index data. The default value is 134217728 bytes (128MB).(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_innodb_log_buffer_size</span>: The size in bytes of the buffer that InnoDB uses to write to the log files on disk.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_key_buffer_size</span>: Index blocks for MyISAM tables are buffered and are shared by all threads.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_query_cache_size</span>: The amount of memory allocated for caching query results.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_table_open_cache</span>: The number of open tables for all threads.(Gauge)
<span style="color:#ff6ac1">mysql_global_variables_open_files_limit</span>: The number of file descriptors available to mysqld from the operating system.(Gauge)

</code></pre></div><p><img src="/fc-monitor/integrations/mysqld-exporter/dashboard-n9e.png" alt="Dashboard demo"></p>
<h1 id="mysqld-exporter-config详细配置项说明">mysqld-exporter-config详细配置项说明</h1>
<div class="highlight"><pre tabindex="0" style="color:#e2e4e5;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">  <span style="color:#78787e"># Enables the mysqld_exporter integration, allowing the Agent to collect</span>
  <span style="color:#78787e"># metrics from a MySQL server.</span>
  <span style="color:#ff6ac1">[enabled</span>: &lt;boolean&gt; | default = false]

  <span style="color:#78787e"># Sets an explicit value for the instance label when the integration is</span>
  <span style="color:#78787e"># self-scraped. Overrides inferred values.</span>
  <span style="color:#78787e">#</span>
  <span style="color:#78787e"># The default value for this integration is a truncated version of the</span>
  <span style="color:#78787e"># connection DSN, containing only the server and db name. (Credentials</span>
  <span style="color:#78787e"># are not included.)</span>
  <span style="color:#ff6ac1">[instance</span>: &lt;string&gt;]

  <span style="color:#78787e"># Automatically collect metrics from this integration. If disabled,</span>
  <span style="color:#78787e"># the mysqld_exporter integration will be run but not scraped and thus not</span>
  <span style="color:#78787e"># remote-written. Metrics for the integration will be exposed at</span>
  <span style="color:#78787e"># /integrations/mysqld_exporter/metrics and can be scraped by an external</span>
  <span style="color:#78787e"># process.</span>
  <span style="color:#ff6ac1">[scrape_integration</span>: &lt;boolean&gt; | default = &lt;integrations_config.scrape_integrations&gt;]

  <span style="color:#78787e"># How often should the metrics be collected? Defaults to</span>
  <span style="color:#78787e"># prometheus.global.scrape_interval.</span>
  <span style="color:#ff6ac1">[scrape_interval</span>: &lt;duration&gt; | default = &lt;global_config.scrape_interval&gt;]

  <span style="color:#78787e"># The timeout before considering the scrape a failure. Defaults to</span>
  <span style="color:#78787e"># prometheus.global.scrape_timeout.</span>
  <span style="color:#ff6ac1">[scrape_timeout</span>: &lt;duration&gt; | default = &lt;global_config.scrape_timeout&gt;]

  <span style="color:#78787e"># Allows for relabeling labels on the target.</span>
  <span style="color:#ff6ac1">relabel_configs</span>:
    [- &lt;relabel_config&gt; ... ]

  <span style="color:#78787e"># Relabel metrics coming from the integration, allowing to drop series</span>
  <span style="color:#78787e"># from the integration that you don&#39;t care about.</span>
  <span style="color:#ff6ac1">metric_relabel_configs</span>:
    [ - &lt;relabel_config&gt; ... ]

  <span style="color:#78787e"># How frequent to truncate the WAL for this integration.</span>
  <span style="color:#ff6ac1">[wal_truncate_frequency</span>: &lt;duration&gt; | default = &#34;60m&#34;]

  <span style="color:#78787e"># Data Source Name specifies the MySQL server to connect to. This is REQUIRED</span>
  <span style="color:#78787e"># but may also be specified by the MYSQLD_EXPORTER_DATA_SOURCE_NAME</span>
  <span style="color:#78787e"># environment variable. If neither are set, the integration will fail to</span>
  <span style="color:#78787e"># start.</span>
  <span style="color:#78787e">#</span>
  <span style="color:#78787e"># The format of this is specified here: https://github.com/go-sql-driver/mysql#dsn-data-source-name</span>
  <span style="color:#78787e">#</span>
  <span style="color:#78787e"># A working example value for a server with no required password</span>
  <span style="color:#78787e"># authentication is: &#34;root@(localhost:3306)/&#34;</span>
  <span style="color:#ff6ac1">data_source_name</span>: &lt;string&gt;

  <span style="color:#78787e"># A list of collector names to enable on top of the default set.</span>
  <span style="color:#ff6ac1">enable_collectors</span>:
    [ - &lt;string&gt; ]
  <span style="color:#78787e"># A list of collector names to disable from the default set.</span>
  <span style="color:#ff6ac1">disable_collectors</span>:
    [ - &lt;string&gt; ]
  <span style="color:#78787e"># A list of collectors to run. Fully overrides the default set.</span>
  <span style="color:#ff6ac1">set_collectors</span>:
    [ - &lt;string&gt; ]

  <span style="color:#78787e"># Set a lock_wait_timeout on the connection to avoid long metadata locking.</span>
  <span style="color:#ff6ac1">[lock_wait_timeout</span>: &lt;int&gt; | default = 2]
  <span style="color:#78787e"># Add a low_slow_filter to avoid slow query logging of scrapes. NOT supported</span>
  <span style="color:#78787e"># by Oracle MySQL.</span>
  <span style="color:#ff6ac1">[log_slow_filter</span>: &lt;bool&gt; | default = false]

  <span style="color:#78787e">## Collector-specific options</span>

  <span style="color:#78787e"># Minimum time a thread must be in each state to be counted.</span>
  <span style="color:#ff6ac1">[info_schema_processlist_min_time</span>: &lt;int&gt; | default = 0]
  <span style="color:#78787e"># Enable collecting the number of processes by user.</span>
  <span style="color:#ff6ac1">[info_schema_processlist_processes_by_user</span>: &lt;bool&gt; | default = true]
  <span style="color:#78787e"># Enable collecting the number of processes by host.</span>
  <span style="color:#ff6ac1">[info_schema_processlist_processes_by_host</span>: &lt;bool&gt; | default = true]
  <span style="color:#78787e"># The list of databases to collect table stats for. * for all</span>
  <span style="color:#ff6ac1">[info_schema_tables_databases</span>: &lt;string&gt; | default = &#34;*&#34;]
  <span style="color:#78787e"># Limit the number of events statements digests by response time.</span>
  <span style="color:#ff6ac1">[perf_schema_eventsstatements_limit</span>: &lt;int&gt; | default = 250]
  <span style="color:#78787e"># Limit how old the &#39;last_seen&#39; events statements can be, in seconds.</span>
  <span style="color:#ff6ac1">[perf_schema_eventsstatements_time_limit</span>: &lt;int&gt; | default = 86400]
  <span style="color:#78787e"># Maximum length of the normalized statement text.</span>
  <span style="color:#ff6ac1">[perf_schema_eventsstatements_digtext_text_limit</span>: &lt;int&gt; | default = 120]
  <span style="color:#78787e"># Regex file_name filter for performance_schema.file_summary_by_instance</span>
  <span style="color:#ff6ac1">[perf_schema_file_instances_filter</span>: &lt;string&gt; | default = &#34;.*&#34;]
  <span style="color:#78787e"># Remove path prefix in performance_schema.file_summary_by_instance</span>
  <span style="color:#ff6ac1">[perf_schema_file_instances_remove_prefix</span>: &lt;string&gt; | default = &#34;/var/lib/mysql&#34;]
  <span style="color:#78787e"># Database from where to collect heartbeat data.</span>
  <span style="color:#ff6ac1">[heartbeat_database</span>: &lt;string&gt; | default = &#34;heartbeat&#34;]
  <span style="color:#78787e"># Table from where to collect heartbeat data.</span>
  <span style="color:#ff6ac1">[heartbeat_table</span>: &lt;string&gt; | default = &#34;heartbeat&#34;]
  <span style="color:#78787e"># Use UTC for timestamps of the current server (`pt-heartbeat` is called with `--utc`)</span>
  <span style="color:#ff6ac1">[heartbeat_utc</span>: &lt;bool&gt; | default = false]
  <span style="color:#78787e"># Enable collecting user privileges from mysql.user</span>
  <span style="color:#ff6ac1">[mysql_user_privileges</span>: &lt;bool&gt; | default = false]
</code></pre></div>
          <footer class="footline">
          </footer>
        </main>
<hr> 

<i>想学习 Nightingale 更多最佳实践？听到 Nightingale 代码层面的分享？生产环境出了问题希望得到夜莺研发团队及时支援？有更多监控/稳定性相关产品需求？欢迎联系电话或微信：18612185520 注明「商务合作」</i>

      </div>
      <div id="navigation">
        <a class="nav nav-prev" href="/grafana-agent/integrations/mongodb-exporter-config/" title="Mongodb Exporter"><i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="/grafana-agent/integrations/node-exporter-config/" title="Node Exporter"><i class="fa fa-chevron-right"></i></a>
      </div>
    </div>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1652425219"></script>
    <script src="/js/perfect-scrollbar.min.js?1652425219"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1652425219"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1652425219"></script>
    <script src="/js/featherlight.min.js?1652425219"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1652425219"></script>
    <script src="/js/mermaid.min.js?1652425219"></script>
    <script>
      if (typeof mermaid != 'undefined' && typeof mermaid.mermaidAPI != 'undefined') {
        mermaid.mermaidAPI.initialize( Object.assign( { "securityLevel": "antiscript" }, JSON.parse("{ \"startOnLoad\": true }"), { startOnLoad: false } ) );
      }
    </script>
    <script src="/js/relearn.js?1652425219"></script>
  </body>
</html>
